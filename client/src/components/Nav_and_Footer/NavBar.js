import '../../styles/componentStyles/navbar.scss'
import React, { useEffect, useState } from 'react'
import { Link, useHistory, useLocation } from 'react-router-dom'
import { getPayloadFromToken, userIsAuthenticated } from '../../helpers/authHelp'

// userIsOwner

//import logo from  '../../assets/Logo.png'


const NavBar = () => {
  const [userId, setUserId] = useState(null)

  const location = useLocation()
  useEffect(() => {

  }, [location.pathname])

  const history = useHistory()
  const handleLogout = () => {
    window.localStorage.removeItem('token')
    history.push('/')
  }

  useEffect(() => {
    const payload = getPayloadFromToken()
    const userId = payload.sub
    // console.log('payload', payload)
    // console.log('userId', userId)
    setUserId(userId)
  }, [getPayloadFromToken()])

  //acess payload from local storage and pass into usi is owner function
  return (
    <nav className="navbar custom-nav">
      <div className="container">
        <div className="navbar-brand">
          <Link to="/">

            <svg viewBox="0 0 591 550" className="second-logo">
              <g id="Page-1" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
                <g id="Asset-2" className="second-logo-color" fillRule="nonzero">
                  <path fill="#000" d="M537.11,12.64 L534,12.64 C361.42,12.64 188.84,12.6233333 16.26,12.59 C13.8,12.59 13.03,13.1 13.04,15.72 C13.1,188.386667 13.12,361.053333 13.1,533.72 L13.1,536.4 L537.1,536.4 L537.1,533.4 C537.1,503.74 537.1,474.073333 537.1,444.4 C537.065989,443.234128 537.153123,442.067875 537.36,440.92 C537.955717,438.03002 540.540486,435.984975 543.49,436.07 C546.530876,436.20258 549.032418,438.509746 549.41,441.53 C549.493746,442.357536 549.511799,443.189365 549.48,444.02 L549.48,541.02 C549.48,546.86 547.35,549.02 541.48,549.02 L9,549.02 C2.73,549.02 0.83,547.1 0.83,540.79 C0.83,364.71 0.83,188.63 0.83,12.55 C0.83,10.8 0.77,9.06 0.69,7.31 C0.504991254,5.46591134 1.12342979,3.63151041 2.38718266,2.27584824 C3.65093553,0.920186073 5.43747934,0.174696845 7.29,0.227127654 C46.79,0.283333333 86.2866667,0.336666667 125.78,0.39 C264.106667,0.39 402.44,0.39 540.78,0.39 C541.69,0.39 542.61,0.39 543.53,0.39 C546.766225,0.469031576 549.370968,3.07377544 549.45,6.31 C549.51,7.14 549.45,7.97 549.45,8.81 L549.45,406.33 C549.48546,407.33034 549.46543,408.331877 549.39,409.33 C549.092604,412.357543 546.645789,414.723926 543.61,414.92 C540.567808,415.087836 537.872574,412.97443 537.31,409.98 C537.098144,408.657859 537.017752,407.317987 537.07,405.98 C537.07,276.16 537.07,146.333333 537.07,16.5 L537.11,12.64 Z" id="Path"></path>
                  <path d="M529.56,430.81 C507.17,431.55 484.78,432.11 462.4,433.12 C448.19,433.75 434.01,434.9 419.84,436.12 C406.57,437.23 393.32,438.58 380.1,440.05 C368.28,441.37 356.49,443.05 344.69,444.49 C333.8,445.84 322.85,446.85 312.01,448.54 C297.89,450.73 283.84,453.38 269.78,455.97 C258.58,458.04 247.37,460.14 236.23,462.51 C221.28,465.69 206.4,469.22 191.46,472.46 C174.98,476.02 158.493333,479.496667 142,482.89 C133.62,484.6 125.16,485.94 116.73,487.43 C114,487.91 111.93,486.69 111.3,484.27 C111.012764,483.206454 111.156446,482.072343 111.709788,481.117579 C112.259387,480.162815 113.166055,479.465754 114.23,479.18 C127.15,475.47 139.97,471.28 153.06,468.32 C169.11,464.68 185.38,462.03 201.57,459.08 C223.82,455.03 246.06,450.94 268.36,447.17 C280.36,445.17 292.41,443.68 304.45,442.09 C322.77,439.69 341.07,437.17 359.45,435.14 C377.64,433.14 395.88,431.5 414.13,430.02 C434.936667,428.34 455.766667,426.856667 476.62,425.57 C503,424 529.48,423.06 556,423.64 C566.56,423.87 577.1,424.84 587.65,425.45 C589.46,425.55 590.87,426.24 590.900451,428.16 C590.93,430.08 589.46,430.85 587.56,431.04 C571.56,432.61 555.56,431.82 539.56,431.48 C536.23,431.41 532.9,431.48 529.56,431.48 C529.58,431.25 529.57,431 529.56,430.81 Z" id="Path"></path>
                  <path d="M37.78,332.48 C41.46,333.06 44.45,333.76 47.48,333.96 C56.48,334.55 64.77,337.84 72.74,341.58 C81.43,345.65 90.12,350.22 94.93,359.23 C97.67,364.38 100.69,369.43 101.59,375.43 C102.580334,381.762418 101.74431,388.245939 99.18,394.12 C94.7642138,404.375518 87.982495,413.439513 79.39,420.57 C75.3256453,424.111709 71.0691911,427.426736 66.64,430.5 C58.14,436.19 48.38,437.64 38.42,437.5 C35.67,437.5 32.83,436.17 30.23,435.01 C27.23,433.66 26.33,430.65 26.02,427.61 C25.3,420.35 24.63,413.08 24.02,405.8 C23.43,398.27 22.84,390.74 22.5,383.19 C22.03,372.81 21.76,362.42 21.5,352.04 C21.39,348.25 21.5,344.45 21.5,340.66 C21.5665949,337.909039 23.5169296,335.565325 26.21,335 C30.18,333.94 34.25,333.23 37.78,332.48 Z M34.78,346.7 L41.39,420.94 C46.97,421.24 51.93,420.33 56.19,417.72 C62.5760126,413.877444 68.7086356,409.628699 74.55,405 C79.3932258,401.035814 82.7924247,395.583738 84.22,389.49 C84.9584084,386.037944 85.0195395,382.475357 84.4,379 C83.5417736,372.461477 80.2755574,366.478168 75.24,362.22 C69.67,357.56 62.93,355.22 56.67,351.87 C49.74,348.16 42.15,347.83 34.75,346.7 L34.78,346.7 Z" id="Shape"></path>
                  <path d="M474,341.64 C475.883551,342.290906 477.729699,343.045389 479.53,343.9 C481.83,345.16 484.3,346.34 486.16,348.12 C493.93,355.52 498.3,364.79 499.99,375.29 C501.15,382.48 502.15,389.7 502.85,396.94 C503.049039,399.48997 502.637682,402.050668 501.65,404.41 C500.583633,406.78316 498.090744,408.179827 495.51,407.85 C492.81337,407.851583 490.408876,406.152408 489.51,403.61 C488.502106,400.301725 487.664342,396.943992 487,393.55 C485.31,385.99 483.69,378.41 482,370.85 C481,366.31 478.59,362.46 475.89,358.78 C473.72,355.78 470.42,354.66 467.09,354.23 C461.43,353.52 455.69,353.35 449.87,352.94 C450.49,359.42 451.27,365.65 451.66,371.94 C452.24,381.07 452.66,390.21 452.92,399.35 C453.05,403.46 450.44,406.55 446.92,407.03 C443.74,407.47 440.41,405.28 439.52,401.36 C438.542014,396.743131 437.873856,392.06603 437.52,387.36 C436.85,379.59 436.58,371.79 435.92,364.02 C435.37,357.5 434.46,351.02 433.79,344.48 C433.47,341.42 433.34,338.35 433.12,335.29 C432.76,330.16 432.41,325.03 432.03,319.91 C431.785131,318.324447 431.64815,316.724103 431.62,315.12 C431.73,313.27 431.8,311.18 432.67,309.65 C434.414082,306.38713 437.244001,303.836666 440.67,302.44 C446.090376,300.143332 451.870953,298.813258 457.75,298.51 C461.524485,298.317434 465.30855,298.451264 469.06,298.91 C477.06,300.12 481.12,305.7 483.49,312.91 C486.87,323.27 483.92,331.91 476.59,339.47 C475.767441,340.240651 474.90278,340.965097 474,341.64 L474,341.64 Z M448.53,338.16 C451.7,337.47 455.08,336.78 458.44,335.99 C467.04,333.99 473,325.21 469.13,315.69 C468.66,314.54 467.19,313.09 466.13,313.01 C461.547642,312.60683 456.941731,312.543324 452.35,312.82 C449.24,313.05 446.21,314.24 443.54,314.9 C445.22,323 446.83,330.44 448.5,338.16 L448.53,338.16 Z" id="Shape"></path>
                  <path d="M248.66,317.07 C256.97,317.97 265.45,318.15 273.56,319.94 C286.29,322.75 293.96,331.83 299.1,343.34 C302.170563,350.448477 303.618978,358.15172 303.34,365.89 C303.2426,375.871212 299.423376,385.456716 292.63,392.77 C282.39,404.1 269.63,410.65 254.97,413.91 C253.976961,414.054587 252.971824,414.098143 251.97,414.04 C249.24,414.04 246.63,413.81 243.83,414.81 C239.83,416.24 235.94,413.33 234.68,408.9 C231.574687,397.982844 229.696415,386.75346 229.08,375.42 C228.93,372.86 229.14,370.27 228.97,367.71 C228.41,359.08 227.73,350.46 227.15,341.84 C226.86,337.54 226.45,333.22 226.57,328.93 C226.57,326.81 227.57,324.66 228.46,322.64 C228.875962,321.729998 229.668541,321.046992 230.63,320.77 C236.67,319.88 242.24,316.42 248.66,317.07 Z M241.16,330.23 C241.64,334.39 242.21,338.4 242.54,342.42 C243.25,351.19 244.2,359.96 244.37,368.74 C244.49692,377.933941 245.559057,387.091106 247.54,396.07 C248.32,399.55 249.45,400.45 252.86,399.32 C258.56,397.43 264.16,395.25 269.74,393.02 C275.67,390.65 279.84,385.87 284.48,381.78 C284.944361,381.317 285.287773,380.746937 285.48,380.12 C290.13,366.51 288.34,353.74 280.32,341.84 C275.63,334.84 269.11,331.47 260.62,331.38 C254.19,331.31 247.75,330.64 241.16,330.23 Z" id="Shape"></path>
                  <path d="M192.2,322.63 C195.2,322.38 198.26,322.03 201.29,321.91 C205.865793,321.683853 210.086358,324.369304 211.82,328.61 C215.35,336.4 220.59,343.55 222.03,352.13 C223.06589,358.574515 223.574243,365.092806 223.55,371.62 C223.55,377.22 222.55,382.83 222.05,388.43 C221.32,396.43 217.49,402.86 212.17,408.54 C209.85,411.02 207.58,413.72 204.8,415.54 C195.71,421.65 180.72,420.09 176.58,405.87 C174.130588,397.569881 172.127716,389.144468 170.58,380.63 C169.11,372.34 167.69,363.87 167.78,355.5 C167.89,346.27 169.69,337.1 175.94,329.5 C180.23,324.33 185.81,322.57 192.2,322.63 Z M208.2,367.33 C207.89,364.01 208.09,360.47 207.2,357.28 C205.2,350.58 202.75,344 200.15,337.51 C199.65,336.27 197.69,335.37 196.21,334.83 C194.993401,334.513751 193.707596,334.594333 192.54,335.06 C191.177985,335.486255 189.943985,336.245905 188.95,337.27 C184.95,341.95 184.37,347.76 184.13,353.55 C183.78,361.89 185.53,369.99 187.43,378.05 C189.13,385.26 190.8,392.48 192.69,399.65 C193.58,403.03 194.95,403.37 197.94,401.48 C200.93,399.59 202.58,396.4 204.08,393.22 C207.88,385 207,376.06 208.16,367.33 L208.2,367.33 Z" id="Shape"></path>
                  <path d="M163.1,374.63 C162.75,383.39 162.2,392.03 160.1,400.54 C158.690042,406.934203 154.712201,412.467018 149.1,415.84 C146.606793,417.469429 144.022588,418.95518 141.36,420.29 C133.56,423.91 125.65,421.82 120.36,414.91 C116.221626,409.472289 113.848477,402.897271 113.56,396.07 C113,386.45 112.68,376.81 112.17,367.19 C111.81,360.43 114.08,354.11 115.26,347.61 C115.796807,344.686185 116.545447,341.805259 117.5,338.99 C119.65,332.61 126.89,328.05 133.63,328.59 C134.248838,328.660524 134.871944,328.500297 135.38,328.14 C139.25,324.37 144.24,325.9 147.01,328.73 C155.77,337.73 162.44,347.73 162.57,360.99 C162.57,365.56 162.9,370.12 163.1,374.63 Z M147.47,370.34 C146.68,364.22 146.69,358.76 145.14,353.78 C143.67,349.09 140.56,344.91 138.14,340.51 C137.958028,340.23746 137.679152,340.044392 137.36,339.97 C135.81,339.61 131.3,342.51 130.97,344.16 C130.32,347.48 129.84,350.84 129.17,354.16 C127.17,363.94 127.56,373.81 128.17,383.67 C128.42,387.47 128.56,391.38 129.58,395 C130.599758,398.286289 132.179664,401.371672 134.25,404.12 C135.8,406.26 137.63,406.12 139.15,403.96 C141.05,401.23 143.15,398.25 143.8,395.1 C145.49,386.69 146.38,378.11 147.47,370.34 Z" id="Shape"></path>
                  <path d="M375.41,321.9 C376.96,333.23 378.41,344.12 379.98,355.42 C383.77,354.47 387.79,353.62 391.72,352.42 C394.381592,351.480097 397.346936,352.29826 399.15,354.47 C401.035166,356.368178 401.49802,359.257997 400.3,361.65 C399.224971,364.271049 396.662846,365.973852 393.83,365.95 C389.77,366.07 385.7,365.95 381.97,365.95 C383.36,375.63 384.73,385.17 386.15,394.95 C390.97,394.71 396.15,394.52 401.38,394.18 C406.84,393.83 412.29,393.18 417.76,392.95 C421.91,392.75 425.12,395.73 425.150211,399.39 C425.18,403.05 422,406 417.83,406 C411.01,406 404.15,405.65 397.37,406.18 C390.485997,406.565775 383.580443,406.186791 376.78,405.05 C374.12,404.67 372.93,403.39 372.17,400.71 C368.76,388.77 368.28,376.32 365.67,364.24 C364.52,358.95 364.92,353.34 364.48,347.89 C363.93,341.11 363.13,334.36 362.62,327.58 C362.286848,323.869024 362.243383,320.137729 362.49,316.42 C362.76,313.22 364.88,311.5 368.06,311.02 C374.77,310.02 381.48,309.02 388.19,308.07 C388.682444,307.99002 389.182728,307.969981 389.68,308.01 C395.22,308.52 400.76,309.01 406.28,309.6 C407.384485,309.668533 408.437038,310.093063 409.28,310.81 C410.22,311.81 411.42,313.34 411.28,314.43 C410.892098,315.884018 409.821734,317.058807 408.41,317.58 C400.72,319.15 393.09,321.18 385.11,321.06 C381.863733,321.162319 378.62553,321.442741 375.41,321.9 Z" id="Path"></path>
                  <path d="M331.69,396.37 C336.93,396.37 341.99,396.37 347.04,396.37 C349.88,396.37 352.71,396.45 355.54,396.5 C359.02,396.57 361.63,398.56 361.87,401.32 C362.11,404.08 359.67,406.89 356.18,407.08 C352.29,407.3 348.37,406.93 344.46,406.97 C337.76743,407.121658 331.074585,406.67993 324.46,405.65 C319.77,404.86 317.46,402.16 316.66,398.17 C314.43,386.65 312.48,375.07 310.66,363.49 C309.43,355.8 308.19,348.08 307.6,340.33 C307.286812,334.041708 307.3536,327.740242 307.8,321.46 C307.993091,319.815167 308.691899,318.270801 309.8,317.04 C310.8,315.91 312.55,314.55 313.8,314.73 C315.41797,315.207424 316.75171,316.35896 317.46,317.89 C318.428993,320.432104 319.139251,323.065418 319.58,325.75 C321.18,333.18 322.8,340.61 324.23,348.08 C325.66,355.55 326.85,362.76 328.1,370.08 C329.05,375.71 329.98,381.35 330.81,387 C331.14,390.06 331.35,393.12 331.69,396.37 Z" id="Path"></path>
                </g>
              </g>
            </svg>
            {/* <img src={logo} alt="Doodle Logo" className="second-logo"></img> */}
          </Link>
        </div>
        <div className="navbar-start">
          { userIsAuthenticated() &&
        <>
          <Link to={`/profile/${userId}`} className="navbar-item">Profile</Link>
          <Link to="/doodle-new" className="navbar-item">Doodle</Link>
        </>
          }
          {/* <Link to="/doodle-new" className="navbar-item">Doodle</Link> */}
          <Link to="/gallery" className="navbar-item">Gallery</Link>
        </div>
        <div className="navbar-end">
          { !userIsAuthenticated() &&
        <>
          <Link to="/join" className="navbar-item">
            Sign Up
          </Link>

          <Link to="/login" className="navbar-item">
            Login
          </Link>
        </>
          }
          { userIsAuthenticated() &&
        <>
          <div className="navbar-item" onClick={handleLogout}>
            Logout
          </div>
        </>
          }
        </div>
      </div>
    </nav>
  )
}

export default NavBar
